{"version":3,"sources":["Reducer.js","ConnectWallet.jsx","CollectUsername.jsx","DIDToGist.jsx","Home.jsx","App.js","reportWebVitals.js","index.js","CreateCredential.jsx"],"names":["pageSlice","createSlice","name","initialState","pasted","reducers","nextPage","state","step","lastPage","setAddress","action","address","payload","setUsername","username","setDID","did","setPasted","store","configureStore","reducer","addr","dispatch","actions","user","connect","setCeramic","useState","web3","setWeb3","providerOptions","walletconnect","package","WalletConnectProvider","options","infuraId","web3Modal","Web3Modal","cacheProvider","disconnect","a","clearCachedProvider","currentProvider","provider","Web3","eth","getAccounts","addresses","threeID","ThreeIdConnect","EthereumAuthProvider","ceramic","Ceramic","setDIDProvider","getDidProvider","id","console","error","enableIfInjected","cachedProvider","useEffect","align","title","slice","Delete","onClick","setName","target","href","as","onSubmit","evt","info","preventDefault","textAlign","value","onChange","onCopy","useClipboard","toast","useToast","Copy","status","duration","isClosable","background","comps","push","CreateCredential","theme","spacing","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","App","document","getElementById","verifier","idxKey","deB64","str","de","Buffer","from","toString","JSON","parse","err","jwtStr","obj","signatures","protected","signature","join","done","setDone","setError","create","url","stringify","fetch","method","body","res","json","datum","challengeCode","data","Error","createJWS","jws","message","att","attestation","parts","split","map","acct","vc","credentialSubject","account","protocol","host","claim","attestations","createDocument","deterministic","content","akaSchema","akaType","toUrl","commit","commitId","createDefinition","description","schema","akaDef","idxDefs","idx","IDX","aliases","get","accounts","aka","merge"],"mappings":"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","file":"static/js/main.5aeb8363.chunk.js","sourcesContent":["import { createSlice, configureStore } from '@reduxjs/toolkit'\n\nconst initial = {\n  pasted: false,\n}\n\nconst pageSlice = createSlice({\n  name: 'page',\n  initialState: initial,\n  reducers: {\n    nextPage: state => ({ ...state, step: state.step + 1 }),\n    lastPage: state => ({ ...state, step: state.step + 1 }),\n    setAddress: (state, action) => (\n      { ...state, address: action.payload }\n    ),\n    setUsername: (state, action) => (\n      { ...state, username: action.payload }\n    ),\n    setDID: (state, action) => (\n      { ...state, did: action.payload }\n    ),\n    setPasted: (state, action) => (\n      { ...state, pasted: action.payload }\n    ),\n  },\n})\n\nexport const store = configureStore({\n  reducer: pageSlice.reducer\n})\n\nexport const next = () => (\n  store.dispatch(pageSlice.actions.nextPage())\n)\nexport const previous = () => (\n  store.dispatch(pageSlice.actions.previousPage())\n)\nexport const setAddress = (addr) => (\n  store.dispatch(pageSlice.actions.setAddress(addr))\n)\nexport const setUsername = (user) => (\n  store.dispatch(pageSlice.actions.setUsername(user))\n)\nexport const setDID = (did) => (\n  store.dispatch(pageSlice.actions.setDID(did))\n)\nexport const setPasted = (pasted) => (\n  store.dispatch(pageSlice.actions.setPasted(pasted))\n)","import { useState } from 'react'\nimport Web3 from 'web3'\nimport Web3Modal from 'web3modal'\nimport WalletConnectProvider from '@walletconnect/web3-provider'\nimport { ThreeIdConnect, EthereumAuthProvider } from '3id-connect'\nimport { connect } from 'react-redux'\nimport {\n  Box, Button, Spinner, Stack, Text\n} from '@chakra-ui/react'\nimport { DeleteIcon } from '@chakra-ui/icons'\nimport Ceramic from '@ceramicnetwork/http-client'\nimport { getInjectedProvider } from 'web3modal'\nimport { useEffect } from 'react'\nimport { setAddress, setDID } from './Reducer'\n\n// Δυς's dev key; not to be relied upon\nconst infuraId = '24eb2385c3514f3d98191ad5e4c903e7'\nconst ceramicSvr = 'https://ceramic-clay.3boxlabs.com'\n\nconst ConnectWallet = ({ address, setCeramic, did }) => {\n  const [web3, setWeb3] = useState()\n\n  const providerOptions = {\n    walletconnect: {\n      package: WalletConnectProvider, // required\n      options: {\n        infuraId // required\n      }\n    }\n  }\n  const web3Modal = new Web3Modal({\n    cacheProvider: true, // optional\n    // network: 'xdai', // optional\n    providerOptions, // required\n  })\n\n  //console.info(getInjectedProvider())\n\n  const disconnect = async () => {\n    setDID()\n    setAddress()\n    web3Modal.clearCachedProvider()\n    if(web3?.currentProvider?.disconnect) {\n      await web3.currentProvider.disconnect()\n    }\n  }\n\n  const connect = async () => {\n    try {\n      const provider = await web3Modal.connect()\n      const web3 = new Web3(provider)\n      setWeb3(web3)\n\n      const addresses = await web3.eth.getAccounts()\n      const address = addresses[0]\n      setAddress(address)\n\n      const threeID = new ThreeIdConnect()\n      await threeID.connect(\n        new EthereumAuthProvider(provider, address)\n      )\n\n      const ceramic = new Ceramic(ceramicSvr)\n      await ceramic.setDIDProvider(threeID.getDidProvider())\n      setCeramic(ceramic)\n\n      setDID(ceramic.did.id)\n      } catch(err) {\n        console.error(err)\n        disconnect()\n      }\n  }\n\n  const enableIfInjected = async () => {\n    if(!did && web3Modal.cachedProvider === 'injected') {\n      await connect()\n    }\n  }\n\n  useEffect(() => enableIfInjected(), [])\n\n  if(address) {\n    return (\n      <Stack align='center'>\n        <Text>\n          Using:\n          <span> </span>\n          <span title={address}>\n            {address.slice(0, 10)}…{address.slice(-5)}\n          </span>\n          <span> </span>\n          <DeleteIcon onClick={disconnect}/>\n        </Text>\n        {!did && <Spinner/>}\n      </Stack>\n    )\n  }\n\n  return (\n    <Box align='center'>\n      <Button onClick={connect}>Connect Your Wallet</Button>\n    </Box>\n  )\n}\n\nexport default connect(\n  (state) => ({\n    address: state.address,\n    did: state.did,\n  }),\n)(ConnectWallet)","import { useState } from 'react'\nimport { connect } from \"react-redux\"\nimport {\n  Box, Text, Input, Center, Stack, Link\n} from \"@chakra-ui/react\"\nimport { DeleteIcon } from '@chakra-ui/icons'\nimport { setUsername } from './Reducer'\n\nconst CollectUsername = ({ username }) => {\n  const [name, setName] = useState(username)\n\n  if(username) {\n    return (\n      <Box><Center>\n        <Text>\n          Checking: {username}\n          <span> </span>\n          <DeleteIcon onClick={() => setUsername()}/>\n        </Text>\n      </Center></Box>\n    )\n  }\n\n  const onSubmit = (evt) => {\n    console.info('SUB', name)\n    evt.preventDefault()\n    setUsername(name)\n  }\n\n  return (\n    <Box><Stack align='center'>\n      <Text>\n        ¿What's your\n        <span> </span>\n        <Link target='_blank' href='//github.com'>Github</Link>\n        <span> </span>\n        username?\n      </Text>\n      <Box as='form' onSubmit={onSubmit}>\n        <Input\n          textAlign='center'\n          value={name}\n          onChange={(evt) => setName(evt.target.value)}\n        />\n      </Box>\n    </Stack></Box>\n  )\n}\n\nexport default connect(\n  (state) => ({\n    username: state.username,\n  })\n)(CollectUsername)","import { connect } from \"react-redux\"\nimport {\n  Box, useClipboard, Text, Stack, Button, useToast, Link\n} from '@chakra-ui/react'\nimport { CopyIcon } from '@chakra-ui/icons'\nimport { setPasted } from './Reducer'\n\nconst DIDToGist = ({ did, username }) => {\n  const { onCopy } = useClipboard(did)\n  const toast = useToast()\n  return (\n    <Box><Stack align='center'>\n      <Text>\n        Copy your DID to a\n        <span> </span>\n        <Link\n          target='_blank'\n          href={`//gist.github.com/${username}`}\n        >\n          gist\n        </Link>.\n      </Text>\n      <Text>\n        <span title={did}>\n          {did.slice(0, 10)}…{did.slice(-5)}\n        </span>\n        <span> </span>\n        <CopyIcon title=\"copy\" onClick={() => {\n          onCopy()\n          toast({\n            title: 'Copied',\n            status: 'success',\n            duration: 2000,\n            isClosable: true,\n          })\n        }}/>\n      </Text>\n      <Button onClick={() => setPasted(true)} background='green.100'>✔ Gist Created</Button>\n    </Stack></Box>\n  )\n}\n\nexport default connect(\n  (state) => ({\n    did: state.did,\n    username: state.username,\n  })\n)(DIDToGist)","import { connect } from 'react-redux'\nimport { useState } from 'react'\nimport ConnectWallet from './ConnectWallet'\nimport CollectUsername from './CollectUsername'\nimport DIDToGist from './DIDToGist'\nimport CreateCredential from './CreateCredential'\nimport { Stack } from '@chakra-ui/react'\nimport { theme, ThemeProvider, CSSReset } from \"@chakra-ui/react\";\n\nconst Home = ({ address, username, did, pasted }) => {\n  const [ceramic, setCeramic] = useState()\n  const comps = []\n  comps.push(<ConnectWallet {...{ setCeramic }}/>)\n  if(did) {\n    comps.push(<CollectUsername/>)\n    if(username) {\n      comps.push(<DIDToGist/>)\n      if(pasted) {\n        comps.push(<CreateCredential {...{ ceramic }}/>)\n      }\n    }\n  }\n  return (\n    <ThemeProvider theme={theme}>\n      <CSSReset />\n      <Stack align='center' spacing={5}>{comps}</Stack>\n    </ThemeProvider>\n  )\n}\n\nexport default connect(state => {\n  const { address, username, did, pasted } = state\n  return { address, username, did, pasted }\n})(Home)","import { Provider } from 'react-redux'\nimport Home from './Home'\nimport { store } from './Reducer'\n\nexport default () => (\n  <Provider store={store}>\n    <Home/>\n  </Provider>\n)\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { useState, useEffect } from 'react'\nimport { connect } from \"react-redux\"\nimport {\n  Box, Spinner, Text, Center, Alert, AlertDescription, AlertIcon\n} from '@chakra-ui/react'\nimport { createDefinition, publishSchema } from '@ceramicstudio/idx-tools'\nimport akaSchema from './akaSchema.json'\nimport { IDX } from '@ceramicstudio/idx'\n\n//const verifier = 'http://localhost:3000'\nconst verifier = 'https://oiekhuylog.execute-api.us-west-2.amazonaws.com/develop'\nconst idxKey = 'aka'\n\n// Reverse base 64 encoding to an object if possible\nconst deB64 = (str) => {\n  const de = Buffer.from(str, 'base64').toString()\n  try {\n    return JSON.parse(de)\n  } catch(err) {\n    return de\n  } \n}\n\n// Convert the object representation of a JWT to a string\nconst jwtStr = (obj) => (\n  [\n    obj.signatures[0].protected,\n    obj.payload,\n    obj.signatures[0].signature,\n  ]\n  .join('.')\n)\n\nconst CreateCredential = ({ did, username, ceramic }) => {\n  const [done, setDone] = useState(false)\n  const [error, setError] = useState()\n  const create = async () => {\n    try {\n      let url = `${verifier}/api/v0/request-github`\n      console.info(JSON.stringify(\n        { did, username }\n      ))\n      let res = await fetch(url, {\n        method: 'post',\n        body: JSON.stringify(\n          { did, username }\n        ),\n      })\n      let datum = await res.json()\n      const challengeCode = datum?.data?.challengeCode\n\n      if(!challengeCode) throw new Error(\"Couldn't generate challenge\")\n      \n      const jws = jwtStr(\n        await ceramic.did.createJWS({ challengeCode })\n      )\n\n      //console.info('Valid:', await ceramic.did.verifyJWS(jws))\n\n      url = `${verifier}/api/v0/confirm-github`\n      res = await fetch(url, {\n        method: 'post',\n        body: JSON.stringify({ jws }),\n      })\n\n      datum = await res.json()\n      if(datum.status === 'error') throw new Error(datum.message)\n      if(datum.status >= 300) throw new Error(datum.body)\n      const att = datum?.data?.attestation\n      if(!att) throw new Error('missing attestation')\n      const parts = att?.split('.').map(deB64)\n      const acct = parts[1].vc.credentialSubject.account\n\n      const account = {\n        protocol: 'https',\n        host: 'github.com',\n        id: acct.username,\n        claim: acct.url,\n        attestations: [{ 'did-jwt-vc': att }]\n      }\n\n      const akaType = await ceramic.createDocument('tile', {\n        deterministic: true,\n        content: akaSchema,\n      })\n\n      console.info('akaType', { id: akaType.id.toUrl(), commit: akaType.commitId.toUrl() })\n\n      const akaDef = await createDefinition(ceramic, {\n        name: 'AsKnownAs',\n        description: 'Account links to an IDX DID', // optional\n        schema: akaType.commitId.toUrl(),\n      })\n\n      console.info('akaDef', { id: akaDef.id.toUrl(), commit: akaDef.commitId.toUrl() })\n\n      const idxDefs = {\n        // [idxKey]: [akaDef.commitId.toUrl()],\n        [idxKey]: [akaDef.id.toUrl()],\n      }\n\n      const idx = new IDX({ ceramic, aliases: idxDefs })\n\n      const aka = (await idx.get(idxKey)) || { accounts: [] }\n\n      console.info('existing', { ...aka })\n\n      if(!aka.accounts) throw new Error(`malformed ${idxKey} entry`)\n      aka.accounts.push(account)\n\n      console.info('new', { ...aka })\n\n      console.info('repo', (await idx.merge(idxKey, aka)).toUrl())\n      setDone(true)\n    } catch(err) {\n      console.error(err)\n      setError(err.message)\n    }\n  }\n\n  useEffect(() => create(), [])\n\n  if(error) {\n    return (\n      <Box><Alert status=\"error\">\n        <AlertIcon />\n        <AlertDescription>{error}</AlertDescription>\n      </Alert></Box>\n    )\n  }\n\n  if(!done) {\n    return (\n      <Box align='center'>\n        <Text>Verifying gist for {username}. <Spinner/></Text>\n      </Box>\n    )\n  }\n\n  return (\n    <Box><Center><Text>Verified</Text></Center></Box>\n  )\n}\n\nexport default connect(\n  (state) => ({\n    did: state.did,\n    username: state.username,\n  })\n)(CreateCredential)"],"sourceRoot":""}